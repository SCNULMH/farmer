<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>들마루 회원가입</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <link rel="stylesheet" th:href="@{/css/header.css}">
    <link rel="stylesheet" th:href="@{/css/deulmaru_SignIn.css}">
</head>
<body>

	<!-- 네비게이션 바 -->
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
            <!-- 왼쪽 메뉴 -->
           

            <!-- 로고 중앙 정렬 -->
            <a class="navbar-brand position-absolute start-50 translate-middle-x" href="/">
                <img src="/image/들마루로고.png" alt="Logo" width="40" height="40" class="d-inline-block align-text-center">
                들마루
            </a>

            <!-- 오른쪽 메뉴 -->
            <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                <ul class="navbar-nav">
                    <!-- 로그인 여부에 따라 표시 -->
                    <li class="nav-item" th:if="${session.user != null}">
                        <span class="nav-link">환영합니다, <span th:text="${session.user.userNickname}"></span> 님!</span>
                    </li>
                    <li class="nav-item" th:if="${session.user != null}">
                        <a class="nav-link btn btn-secondary" href="/auth/mypage">마이페이지</a>
                    </li>
                    <li class="nav-item" th:if="${session.user != null}">
                        <a class="nav-link btn btn-danger" href="/auth/logout">로그아웃</a>
                    </li>
                    <li class="nav-item" th:if="${session.user == null}">
                        <a class="nav-link btn btn-outline-primary" href="/auth/login">로그인</a>
                    </li>
                    <li class="nav-item" th:if="${session.user == null}">
                        <a class="nav-link btn btn-primary" href="/auth/register-options">회원가입</a>
                    </li>
                </ul>
            </div>
        
			</div>
			
    </nav>


    <!-- 회원가입 폼 시작 -->
    <form action="/auth/register" method="post" class="userInfo container-sm text-center">
        <div class="signIn_txt">
            <h1>회원가입</h1>
        </div>

        <div>
            <h3>기본 입력 정보</h3>
        </div>

        <!-- 아이디 입력 -->
        <div class="form-floating mb-3 w-50 mx-auto">
            <input type="text" class="form-control" id="userId" name="userId" placeholder="ID" required>
            <label for="userId">아이디를 입력하세요</label>
        </div>

        <!-- 비밀번호 입력 -->
        <div class="form-floating w-50 mx-auto mt-2">
            <input type="password" class="form-control" id="userPw" name="userPw" placeholder="Password" required>
            <label for="userPw">비밀번호를 입력하세요</label>
            <span id="passwordHelpInline" class="form-text">8글자 이상 입력</span>
        </div>

        <!-- 비밀번호 입력 -->
		<div class="form-floating w-50 mx-auto mt-2">
		      <input type="text" class="form-control" id="userNickname" name="userNickname" placeholder="Nickname" required>
		      <label for="userNickname">닉네임을 입력하세요</label>
		  </div>

	        <!-- 이메일 입력 부분 -->
	<div class="row g-2 mt-2 justify-content-center">
	  <div class="col-sm-8 d-flex justify-content-center align-items-center gap-2">
	    
	    <!-- (1) 이메일 아이디 입력: type="text"로 변경 -->
	    <div class="form-floating w-50">
	      <input type="text" class="form-control" id="userEmail" name="userEmail" placeholder="이메일 아이디" required>
	      <label for="userEmail">이메일</label>
	    </div>
	
	    <!-- (2) 도메인 선택: @naver.com, @gmail.com, ... + '직접 입력' 옵션 -->
	    <div class="form-floating w-25">
	      <select class="form-select" id="emailDomain" name="emailDomain">
	        <option value="@naver.com">@naver.com</option>
	        <option value="@gmail.com">@gmail.com</option>
	        <option value="@daum.net">@daum.net</option>
	        <option value="@hanmail.com">@hanmail.com</option>
	        <option value="custom">직접 입력</option>
	      </select>
	      <label for="emailDomain">선택입력</label>
	    </div>
	
	    <!-- (3) 직접 도메인 입력란: 기본적으로 숨김 상태 -->
	    <div class="form-floating w-50" id="customDomainContainer" style="display: none;">
	      <input type="text" class="form-control" id="customDomain" name="customDomain" placeholder="예: mydomain.com">
	      <label for="customDomain">직접 도메인 입력</label>
	    </div>
	
	  </div>
	</div>


        <hr class="my-4 w-50 mx-auto mt-5">

        <div>
            <h3>추가 입력 정보</h3>
        </div>

        <!-- 주소 입력 -->
        <div class="form-floating mb-3 w-50 mx-auto">
	    <!-- select로 변경 -->
	    <select class="form-select" id="userLocate" name="userLocate" required>
	        <!-- placeholder 역할을 할 disabled/selected 옵션 -->
	        <option value="" disabled selected>주소지를 선택하세요</option>
	        <option value="서울">서울</option>
	        <option value="부산">부산</option>
	        <option value="대구">대구</option>
	        <option value="인천">인천</option>
	        <option value="광주">광주</option>
	        <option value="대전">대전</option>
	        <option value="울산">울산</option>
	        <option value="세종">세종</option>
	        <option value="경기">경기</option>
	        <option value="강원">강원</option>
	        <option value="충북">충북</option>
	        <option value="충남">충남</option>
	        <option value="전북">전북</option>
	        <option value="전남">전남</option>
	        <option value="경북">경북</option>
	        <option value="경남">경남</option>
	        <option value="제주">제주</option>
		    </select>
		    <!-- label도 select에 맞게 수정 -->
		    <label for="userLocate">주소지를 선택하세요</label>
		</div>


        <!-- 생년월일 입력 -->
        <div class="d-flex justify-content-center">
            <div class="form-floating w-50">
                <input type="date" class="form-control" id="userBirth" name="userBirth" required>
                <label for="userBirth">생년월일</label>
            </div>
        </div>

        <!-- 성별 선택 -->
        <div class="personal-info mt-4 d-flex justify-content-center align-items-center gap-2">
            <select class="form-select form-select-lg mb-3 w-50" id="userGender" name="userGender" required>
                <option selected value="">성별 선택</option>
                <option value="M">남성</option>
                <option value="F">여성</option>
            </select>
        </div>

		
		<!-- 카카오 로그인 후 세션에 kakaoUserInfo 있을 때 hidden input 추가 -->
		<input type="hidden" id="kakaoId" name="kakaoId" 
		       th:value="${session.kakaoUserInfo != null ? session.kakaoUserInfo.kakaoId : ''}" />

		
		
        <div class="instruction">
            <p>🌱 추가 정보는 추후 사용자의 재배 작물 일정에 반영됩니다.</p>
        </div>

        <!-- 가입하기 버튼 -->
        <button type="submit" class="btn btn-primary btn-lg w-50 mx-auto mt-4 mb-3"
        style="background-color: #37a269ee; border-color: #37a269e2; color: white;">가입하기</button>

        <!-- grass_gif -->
        <img src="/image/풀.gif" alt="배경 GIF" class="background-gif w-75">
    </form>
    <!-- 회원가입 폼 끝 -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/deulmaru_SignIn.js"></script>
</body>
</html>
